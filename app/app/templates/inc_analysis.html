<div class="container py-4">
    <div class="card mx-auto" style="max-width: 1000px;">
        <div class="card-header d-flex align-items-center justify-content-between">
            <span class="fw-bold fs-5"><i class="bi bi-graph-up-arrow me-2"></i>Whole Transcriptome Analysis</span>
            <button class="btn btn-link" id="helpIconAnalysis" style="font-size: 24px;">
                <i class="bi bi-question-circle"></i>
            </button>
        </div>
        <div class="card-body">
            <div id="analysisOptions">
                <div class="row justify-content-center">
                    <div class="col-auto form-group">
                        <select class="form-control" id="analysisType">
                            {% for key, description in analysis_options.items() %}
                            <option value="{{ key }}">{{ description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="text-center mb-3">
                    <button id="generalHelpIcon" class="btn btn-link" style="font-size: 24px;">
                        <i class="bi bi-question-circle"></i>
                    </button>
                </div>
                <div id="analysisDescriptionContainer">
                    <div id="description_plot_module_props" class="general-analysis-description" style="display: none;">
                        <p>The Transcripts per Module analysis provides an overview of all transcripts, displaying the
                            relative share of transcripts in each module using bar plots.</p>
                    </div>
                    <div id="description_plot_module_orthos" class="general-analysis-description"
                        style="display: none;">
                        <p>The Orthogroups per Module analysis shows a bar plot with the number of unique ortholog
                            groups
                            and total transcripts per module.</p>
                    </div>
                    <div id="description_plot_module_hubs" class="general-analysis-description" style="display: none;">
                        <p>The Top Hub Transcripts per Module analysis generates a bar plot for each module showing
                            connectivity and mean counts of the top hub transcripts.</p>
                    </div>
                    <div id="description_plot_module_goea" class="general-analysis-description" style="display: none;">
                        <p>The GOEA of each Module analysis performs Gene Ontology Enrichment Analysis per module, using
                            a
                            specified top percentage of transcripts. Detailed tree representations are available in the
                            Session Files.</p>
                    </div>
                    <div id="description_plot_correlation_network" class="general-analysis-description"
                        style="display: none;">
                        <p>The Module Eigengenes Correlation Network analysis calculates correlations between module
                            eigengenes across samples and displays the resulting network.</p>
                    </div>
                    <div id="description_plot_jaccard_tissues" class="general-analysis-description"
                        style="display: none;">
                        <p>The Tissues Similarity Network analysis calculates the Jaccard similarity between tissues of
                            different species based on top expressed orthogroups.</p>
                    </div>
                    <div id="description_plot_tissues_corr" class="general-analysis-description" style="display: none;">
                        <p>The Tissues Similarity Heatmap analysis visualizes the similarity of tissue expression
                            profiles
                            as a heatmap based on top expressed orthogroups.</p>
                    </div>
                    <div id="description_plot_jaccard_modules" class="general-analysis-description"
                        style="display: none;">
                        <p>The Module Similarity Network analysis calculates the Jaccard similarity between modules
                            across
                            species, using options for shapes, colors, and inter‑species focus.</p>
                    </div>
                    <div id="description_plot_modules_corr" class="general-analysis-description" style="display: none;">
                        <p>The Module Similarity Heatmap analysis visualizes the similarity between modules across
                            species
                            as a heatmap.</p>
                    </div>
                    <div id="description_plot_species_correlation_network" class="general-analysis-description"
                        style="display: none;">
                        <p>The Module Membership Correlation Network analysis compares modules across species based on
                            correlations of module memberships. Parameters include a correlation threshold, p‑value, and
                            visualization options.</p>
                    </div>
                    <div id="description_plot_hog_level" class="general-analysis-description" style="display: none;">
                        <p>The HOGs Level Distribution analysis visualizes the levels of Hierarchical Orthologous Groups
                            for
                            each species and their commonalities.</p>
                    </div>
                </div>
                <!-- Analysis Parameters Toggle -->
                <div id="wholeParametersToggle">
                    <details id="parametersToggle">
                        <summary class="toggle-header">Parameters</summary>
                        <div class="toggle-content">
                            <div class="row justify-content-center mt-3">
                                <div class="col-md-6 col-lg-8">
                                    
                                    <!-- Percentage of Highest Expressed Transcripts -->
                                    <div class="row mb-3" id="nTopPercentGroup" style="display: none;">
                                        <label for="nTopPercent" class="col-sm-4 col-form-label text-end">
                                            Percentage of Highest Expressed Transcripts
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="nTopPercent"
                                                placeholder="Enter top percentage" step="0.1" value="1.0" min="0.1"
                                                max="100" required>
                                        </div>
                                    </div>
                                    <!-- Top n of Highest Expressed Transcripts -->
                                    <div class="row mb-3" id="nTopGroup" style="display: none;">
                                        <label for="nTop" class="col-sm-4 col-form-label text-end">
                                            Top n of Highest Expressed Transcripts
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="nTop"
                                                placeholder="Enter top n" step="1" value="10" min="1" required>
                                        </div>
                                    </div>
                                    <!-- Threshold -->
                                    <div class="row mb-3" id="thresholdGroup" style="display: none;">
                                        <label for="threshold" class="col-sm-4 col-form-label text-end">
                                            Threshold
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="threshold"
                                                placeholder="Enter threshold value" step="0.01" value="0.1" min="0.0"
                                                max="1.0" required>
                                        </div>
                                    </div>
                                    <!-- Maximum P‑Value -->
                                    <div class="row mb-3" id="maxPvalGroup" style="display: none;">
                                        <label for="maxPval" class="col-sm-4 col-form-label text-end">
                                            Maximum P‑Value
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="maxPval"
                                                placeholder="Enter max p‑value" step="0.01" value="0.05" min="0.0"
                                                max="1.0" required>
                                        </div>
                                    </div>
                                    <!-- Minimum Fold Enrichment -->
                                    <div class="row mb-3" id="minFeGroup" style="display: none;">
                                        <label for="minFe" class="col-sm-4 col-form-label text-end">
                                            Minimum Fold Enrichment
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="minFe"
                                                placeholder="Enter min fold enrichment" step="0.01" value="0.2"
                                                min="0.0" max="1.0" required>
                                        </div>
                                    </div>
                                    <!-- Minimum Depth -->
                                    <div class="row mb-3" id="minDepthGroup" style="display: none;">
                                        <label for="minDepth" class="col-sm-4 col-form-label text-end">
                                            Minimum Depth
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" id="minDepth"
                                                placeholder="Enter min depth" value="2" min="0" required>
                                        </div>
                                    </div>
                                    <!-- Positive Correlation -->
                                    <div class="row mb-3" id="positiveGroup" style="display: none;">
                                        <label for="positive" class="col-sm-4 col-form-label text-end">
                                            Positive Correlation
                                        </label>
                                        <div class="col-sm-8 d-flex align-items-center">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input large-checkbox"
                                                    id="positive" checked>
                                                <label class="form-check-label" for="positive"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Use Shapes for Species -->
                                    <div class="row mb-3" id="useShapesGroup" style="display: none;">
                                        <label for="useShapes" class="col-sm-4 col-form-label text-end"
                                            id="useShapesLabel">
                                            Use Shapes for Species
                                        </label>
                                        <div class="col-sm-8 d-flex align-items-center">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input large-checkbox"
                                                    id="useShapes">
                                                <label class="form-check-label" for="useShapes"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Use Colors for Modules -->
                                    <div class="row mb-3" id="useColorsGroup" style="display: none;">
                                        <label for="useColors" class="col-sm-4 col-form-label text-end">
                                            Use Colors for Modules
                                        </label>
                                        <div class="col-sm-8 d-flex align-items-center">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input large-checkbox"
                                                    id="useColors">
                                                <label class="form-check-label" for="useColors"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Inter Species Only -->
                                    <div class="row mb-3" id="interSpeciesOnlyGroup" style="display: none;">
                                        <label for="interSpeciesOnly" class="col-sm-4 col-form-label text-end">
                                            Inter Species Only
                                        </label>
                                        <div class="col-sm-8 d-flex align-items-center">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input large-checkbox"
                                                    id="interSpeciesOnly" checked>
                                                <label class="form-check-label" for="interSpeciesOnly"></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </details>
                </div>
                <br>
                <div class="d-flex justify-content-center">
                    <button type="button" class="btn btn-primary" id="runAnalysis">Run Analysis</button>
                </div>
                <br>
                <div id="resultsContainer" style="position: relative;">
                    <div id="loadingBar4" class="loading-text" style="display:none;">
                        <span id="loadingStatusText4">Loading...</span>
                    </div>
                    <div id="results" class="results" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>
</div>