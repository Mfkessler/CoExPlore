<div class="container py-4">
  <div class="card mx-auto" style="max-width: 1000px;">
    <div class="card-header d-flex align-items-center justify-content-between flex-wrap">
      <span class="fw-bold fs-5 d-flex align-items-center">
        <i class="bi bi-database me-2"></i>Datasets
      </span>
      <!-- Help Icon Dataset Description -->
      <button class="btn btn-link" id="helpIconDataset" style="font-size: 24px;">
        <i class="bi bi-question-circle"></i>
      </button>
    </div>

    <div class="card-body">
      <!-- Dataset Description (toggled by help icon) -->
      <div id="userGuideCardDataset" class="analysis-description mt-3" style="display: none;">
        <p>
          The datasets have been processed using <a href="https://github.com/Mfkessler/PyWGCNA"
            target="_blank"><strong>PyWGCNA</strong></a>
          with the following default parameters:
        </p>
        <ul>
          <li>Minimum Module Size: <strong>50</strong></li>
          <li>Dissimilarity Threshold: <strong>0.2</strong></li>
          <li>Network Type: <strong>signed hybrid</strong></li>
          <li>Power: <strong>between 9 and 19</strong> to achieve a <strong>scale‑free network</strong></li>
          <li>R² Cut: <strong>0.9</strong></li>
          <li>Mean Connectivity: <strong>100</strong></li>
        </ul>
      </div>

      <!-- Datasets -->
      <form id="analysisForm">
        <div class="row">
          <div class="col-12 text-center mb-2">
            <button type="button" class="btn btn-sm btn-outline-secondary me-1" id="selectAllSpecies" style="font-size:0.95em;line-height:1.3;padding:2px 12px 2px 12px;">Select All</button>
            <button type="button" class="btn btn-sm btn-outline-secondary" id="deselectAllSpecies" style="font-size:0.95em;line-height:1.3;padding:2px 12px 2px 12px;">Deselect All</button>
          </div>
        </div>
        <div class="row g-2 mb-3">
          {% for code, name in species %}
          <div class="col-6 col-md-4 col-lg-3">
            <input type="checkbox" class="btn-check" id="species-card-{{ code }}" name="plant" value="{{ code }}"
              autocomplete="off" {% if loop.first %}checked{% endif %}>
            <label class="card h-100 btn btn-outline-primary" for="species-card-{{ code }}" style="cursor:pointer;">
              <div class="card-body p-3 text-center">
                <div class="mb-2" style="font-size:1rem;">
                  <i class="bi bi-flower1"></i>
                </div>
                <div class="fw-bold" style="font-size:0.75rem;">{{ name }}</div>
              </div>
            </label>
          </div>
          {% endfor %}
        </div>
      </form>
    </div>
  </div>
</div>